<app-header></app-header>
<div class="container">
  <!-- Temp Login Stuff -->
  <h2>Log In</h2>
  <div class="row" *ngIf="!_userService.token">
    <div class="col-sm-4">
      <label>Username:</label><br />
      <input type="text" name="login-username" [(ngModel)]="user.username">
      <span *ngFor="let error of _userService.errors.username"><br />
      {{ error }}</span></div>
    <div class="col-sm-4">
      <label>Password:</label><br />
      <input type="password" name="login-password" [(ngModel)]="user.password">
      <span *ngFor="let error of _userService.errors.password"><br />
      {{ error }}</span>
    </div>
    <div class="col-sm-4">
      <button (click)="login()" class="btn btn-primary">Log In</button>
    </div>
    <div class="col-sm-12">
      <span *ngFor="let error of _userService.errors.non_field_errors">{{ error }}<br /></span>
    </div>
  </div>
  <br />
  <hr>
  <br />
  <div class="row" *ngIf="!_userService.token">
    <div class="col-sm-3">
      <label>Username:</label><br />
      <input type="text" name="register-username" [(ngModel)]="newuser.username"></div>
      <div class="col-sm-3">
        <label>Email:</label><br />
        <input type="text" name="register-email" [(ngModel)]="newuser.email"><br/></div>
    <div class="col-sm-3">
      <label>Password:</label><br />
      <input type="password" name="register-password" [(ngModel)]="newuser.password"><br /></div>
    <div class="col-sm-3">
      <button (click)="register()" class="btn btn-primary">Register</button>
    </div>
    <div class="col-sm-12">
      <span *ngFor="let error of _userService.errors.non_field_errors">{{ error }}<br /></span>
    </div>
  </div>
  <div class="row" *ngIf="_userService.token">
    <div class="col-sm-12">You are logged in as {{ _userService.username }}.<br />
      Token Expires: {{ _userService.token_expires }}<br />
      <button (click)="refreshToken()" class="btn btn-primary">Refresh Token</button>
      <div class="col-sm-3">
        <label>New Password:</label><br />
        <input type="password" name="new-password" id="newPassword" #newPassword><br /></div>
      <button (click)="changePassword(newPassword.value)" class="btn btn-primary">Change Password</button>
      <button (click)="logout()" class="btn btn-primary">Log Out</button>
    </div>
  </div>
  <!-- Temp Login Stuff End -->
  <div class="row">
      <div class="col-md-12">
          <router-outlet></router-outlet>
      </div>
  </div>
</div>